addEventListener("message",({data:r})=>{let{users:t,criterion:o}=r,a=new Map;for(let s of t){let e;switch(o){case"nationality":e=s.nat||"Unknown";break;case"alphabetical":e=(s.lastname?.[0]??"#").toUpperCase();break;case"age":let n=s.age??0;n<26?e="18-25":n<36?e="26-35":n<46?e="36-45":n<56?e="46-55":e="56+";break;case"gender":e=s.gender??"Unknown";break;default:e=s.nat||"Unknown"}a.has(e)||a.set(e,[]),a.get(e).push(s)}let i=Array.from(a.entries()).map(([s,e])=>({name:s,users:e})).sort((s,e)=>s.name.localeCompare(e.name));postMessage(i)});
